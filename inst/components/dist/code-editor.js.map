{
  "version": 3,
  "sources": ["../../../srcts/src/components/webcomponents/_makeInputBinding.ts", "../../../srcts/src/components/_utils.ts", "../../../srcts/src/components/codeEditor.ts"],
  "sourcesContent": ["export interface CustomElementInputValue<T> extends HTMLElement {\n  id: string;\n  value: T;\n  onChangeCallback: (x: boolean) => void;\n  receiveMessage: (el: HTMLElement, data: { [key: string]: any }) => void;\n}\n\nexport interface CustomElementInputGetValue<T> extends HTMLElement {\n  id: string;\n  getValue: () => T;\n  onChangeCallback: (x: boolean) => void;\n  receiveMessage: (el: HTMLElement, data: { [key: string]: any }) => void;\n}\n\nexport type CustomElementInput<T> =\n  | CustomElementInputGetValue<T>\n  | CustomElementInputValue<T>;\n\n/**\n * Given a tag name for a custom element that is a CustomElementInput<T>, this\n * will hook up the proper input binding and register it with Shiny.\n * @param tagName Name of the tag that corresponds to the input binding\n * @returns Nothing\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function makeInputBinding<T>(\n  tagName: string,\n  { type = null }: { type?: string | null } = {}\n) {\n  if (!window.Shiny) {\n    return;\n  }\n\n  class NewCustomBinding extends window.Shiny[\"InputBinding\"] {\n    constructor() {\n      super();\n    }\n\n    find(scope: HTMLElement): JQuery<CustomElementInput<T>> {\n      return $(scope).find(tagName) as JQuery<CustomElementInput<T>>;\n    }\n\n    getValue(el: CustomElementInputGetValue<T> | CustomElementInputValue<T>) {\n      if (\"getValue\" in el) {\n        return el.getValue();\n      } else {\n        return el.value;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getType(el: CustomElementInput<T>): string | null {\n      return type;\n    }\n\n    subscribe(el: CustomElementInput<T>, callback: (x: boolean) => void): void {\n      el.onChangeCallback = callback;\n    }\n\n    unsubscribe(el: CustomElementInput<T>): void {\n      // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n      el.onChangeCallback = (x: boolean) => {};\n    }\n\n    receiveMessage(\n      el: CustomElementInput<T>,\n      data: { [key: string]: any }\n    ): void {\n      el.receiveMessage(el, data);\n    }\n  }\n\n  window.Shiny.inputBindings.register(\n    new NewCustomBinding(),\n    `${tagName}-Binding`\n  );\n}\n", "import type { HtmlDep } from \"rstudio-shiny/srcts/types/src/shiny/render\";\n\nimport type { InputBinding as InputBindingType } from \"rstudio-shiny/srcts/types/src/bindings/input\";\n\nimport type { ShinyClass } from \"rstudio-shiny/srcts/types/src\";\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst Shiny: ShinyClass | undefined = window.Shiny;\n\n// Exclude undefined from T\ntype NotUndefined<T> = T extends undefined ? never : T;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst InputBinding = (\n  Shiny ? Shiny.InputBinding : class {}\n) as typeof InputBindingType;\n\nfunction registerBinding(\n  inputBindingClass: new () => InputBindingType,\n  name: string\n): void {\n  if (Shiny) {\n    Shiny.inputBindings.register(new inputBindingClass(), \"bslib.\" + name);\n  }\n}\n\nfunction registerBslibGlobal(name: string, value: object): void {\n  (window as any).bslib = (window as any).bslib || {};\n  if (!(window as any).bslib[name]) {\n    (window as any).bslib[name] = value;\n  } else {\n    console.error(\n      `[bslib] Global window.bslib.${name} was already defined, using previous definition.`\n    );\n  }\n}\n\ntype ShinyClientMessage = {\n  message: string;\n  headline?: string;\n  status?: \"error\" | \"info\" | \"warning\";\n};\n\nfunction showShinyClientMessage({\n  headline = \"\",\n  message,\n  status = \"warning\",\n}: ShinyClientMessage): void {\n  document.dispatchEvent(\n    new CustomEvent(\"shiny:client-message\", {\n      detail: { headline: headline, message: message, status: status },\n    })\n  );\n}\n\n// Return true if the key exists on the object and the value is not undefined.\n//\n// This method is mainly used in input bindings' `receiveMessage` method.\n// Since we know that the values are sent by Shiny via `{jsonlite}`,\n// then we know that there are no `undefined` values. `null` is possible, but not `undefined`.\nfunction hasDefinedProperty<\n  Prop extends keyof X,\n  X extends { [key: string]: any }\n>(\n  obj: X,\n  prop: Prop\n): obj is X & { [key in NonNullable<Prop>]: NotUndefined<X[key]> } {\n  return (\n    Object.prototype.hasOwnProperty.call(obj, prop) && obj[prop] !== undefined\n  );\n}\n\n// TODO: Shiny should trigger resize events when the output\n// https://github.com/rstudio/shiny/pull/3682\nfunction doWindowResizeOnElementResize(el: HTMLElement): void {\n  if ($(el).data(\"window-resize-observer\")) {\n    return;\n  }\n  const resizeEvent = new Event(\"resize\");\n  const ro = new ResizeObserver(() => {\n    window.dispatchEvent(resizeEvent);\n  });\n  ro.observe(el);\n  $(el).data(\"window-resize-observer\", ro);\n}\n\nfunction getAllFocusableChildren(el: HTMLElement): HTMLElement[] {\n  // Cross-referenced with https://allyjs.io/data-tables/focusable.html\n  const base = [\n    \"a[href]\",\n    \"area[href]\",\n    \"button\",\n    \"details summary\",\n    \"input\",\n    \"iframe\",\n    \"select\",\n    \"textarea\",\n    '[contentEditable=\"\"]',\n    '[contentEditable=\"true\"]',\n    '[contentEditable=\"TRUE\"]',\n    \"[tabindex]\",\n  ];\n  const modifiers = [':not([tabindex=\"-1\"])', \":not([disabled])\"];\n  const selectors = base.map((b) => b + modifiers.join(\"\"));\n  const focusable = el.querySelectorAll(selectors.join(\", \"));\n  return Array.from(focusable) as HTMLElement[];\n}\n\nasync function shinyRenderContent(\n  ...args: Parameters<ShinyClass[\"renderContentAsync\"]>\n): Promise<void> {\n  if (!Shiny) {\n    throw new Error(\"This function must be called in a Shiny app.\");\n  }\n  if (Shiny.renderContentAsync) {\n    return await Shiny.renderContentAsync.apply(null, args);\n  } else {\n    return await Shiny.renderContent.apply(null, args);\n  }\n}\n\n// Copied from shiny utils\nasync function updateLabel(\n  labelContent: string | { html: string; deps: HtmlDep[] } | undefined,\n  labelNode: JQuery<HTMLElement>\n): Promise<void> {\n  // Only update if label was specified in the update method\n  if (typeof labelContent === \"undefined\") return;\n  if (labelNode.length !== 1) {\n    throw new Error(\"labelNode must be of length 1\");\n  }\n\n  if (typeof labelContent === \"string\") {\n    labelContent = {\n      html: labelContent,\n      deps: [],\n    };\n  }\n\n  if (labelContent.html === \"\") {\n    labelNode.addClass(\"shiny-label-null\");\n  } else {\n    await shinyRenderContent(labelNode, labelContent);\n    labelNode.removeClass(\"shiny-label-null\");\n  }\n}\n\nexport {\n  InputBinding,\n  registerBinding,\n  registerBslibGlobal,\n  hasDefinedProperty,\n  doWindowResizeOnElementResize,\n  getAllFocusableChildren,\n  shinyRenderContent,\n  showShinyClientMessage,\n  Shiny,\n  updateLabel,\n};\nexport type { HtmlDep, ShinyClientMessage };\n", "/**\n * @fileoverview Code Editor Web Component for bslib\n *\n * A Shiny input binding that creates a code editor using prism-code-editor\n * with syntax highlighting, theme support, and bidirectional communication\n * with R/Shiny.\n *\n * This file is built as a separate ES module bundle (code-editor.js) to\n * enable lazy loading - prism-code-editor and language grammars are only\n * loaded when the editor is used.\n */\n\nimport type { CustomElementInputGetValue } from \"./webcomponents/_makeInputBinding\";\nimport { makeInputBinding } from \"./webcomponents/_makeInputBinding\";\nimport {\n  hasDefinedProperty,\n  showShinyClientMessage,\n  updateLabel,\n} from \"./_utils\";\n\n// Default values - should match input_code_editor() defaults\n/* eslint-disable @typescript-eslint/naming-convention */\nconst DEFAULT_LANGUAGE = \"plain\";\nconst DEFAULT_TAB_SIZE = 2;\nconst DEFAULT_THEME_LIGHT = \"github-light\";\nconst DEFAULT_THEME_DARK = \"github-dark\";\nconst SUBMIT_FLASH_DURATION_MS = 400;\n/* eslint-enable @typescript-eslint/naming-convention */\n\n// Type definitions for prism-code-editor\ninterface PrismEditor {\n  value: string;\n  keyCommandMap: {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Enter?: (\n      e: KeyboardEvent,\n      selection: unknown,\n      value: string\n    ) => boolean | undefined;\n    [key: string]: unknown;\n  };\n  textarea: HTMLTextAreaElement;\n  setOptions(options: PrismEditorOptions): void;\n  update(): void;\n  on(event: string, callback: () => void): void;\n}\n\ninterface PrismEditorOptions {\n  language?: string;\n  value?: string;\n  tabSize?: number;\n  insertSpaces?: boolean;\n  lineNumbers?: boolean;\n  wordWrap?: boolean;\n  readOnly?: boolean;\n}\n\ninterface PrismCodeEditorModule {\n  createEditor: (\n    element: HTMLElement,\n    options: PrismEditorOptions,\n    ...extensions: any[]\n  ) => PrismEditor;\n}\n\ninterface CopyButtonModule {\n  copyButton: () => any;\n}\n\ninterface CommandsModule {\n  defaultCommands: () => any;\n}\n\ninterface TooltipsModule {\n  addTooltip: (\n    editor: PrismEditor,\n    tooltip: HTMLElement,\n    autoHide: boolean\n  ) => [() => void, () => void];\n}\n\ninterface CursorModule {\n  cursorPosition: () => (editor: PrismEditor) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\ntype CodeEditorReceiveMessageData = {\n  value?: string;\n  label?: string;\n  /* eslint-disable @typescript-eslint/naming-convention */\n  tab_size?: number;\n  indentation?: \"space\" | \"tab\";\n  read_only?: boolean;\n  line_numbers?: boolean;\n  word_wrap?: boolean;\n  language?: string;\n  theme_light?: string;\n  theme_dark?: string;\n  /* eslint-enable @typescript-eslint/naming-convention */\n};\n\n/**\n * A code editor web component with syntax highlighting and Shiny integration.\n *\n * Uses prism-code-editor internally. Supports 20+ languages, light/dark themes,\n * and automatic theme switching based on Bootstrap's `data-bs-theme` attribute.\n *\n * @example\n * ```html\n * <bslib-code-editor\n *   id=\"my-editor\"\n *   language=\"python\"\n *   value=\"print('hello')\"\n *   theme-light=\"github-light\"\n *   theme-dark=\"github-dark\"\n * ></bslib-code-editor>\n * ```\n */\nexport class BslibCodeEditor\n  extends HTMLElement\n  implements CustomElementInputGetValue<string | void>\n{\n  static tagName = \"bslib-code-editor\";\n  static isShinyInput = true;\n\n  static observedAttributes = [\n    \"language\",\n    \"readonly\",\n    \"line-numbers\",\n    \"word-wrap\",\n    \"tab-size\",\n    \"insert-spaces\",\n    \"theme-light\",\n    \"theme-dark\",\n  ];\n\n  // Shared state across all instances\n  static #loadedLanguages = new Set<string>();\n  static #loadedThemes = new Set<string>();\n  static #basePath: string | null = null;\n\n  /** Locates and caches the base path for prism-code-editor assets. */\n  static #getBasePath(): string {\n    if (BslibCodeEditor.#basePath !== null) {\n      return BslibCodeEditor.#basePath;\n    }\n\n    const scriptElement = document.querySelector(\n      'script[src*=\"prism-code-editor\"][src$=\"index.js\"]'\n    );\n\n    if (!scriptElement) {\n      throw new Error(\n        \"Could not find prism-code-editor script element. \" +\n          \"Ensure the prism-code-editor dependency is properly loaded.\"\n      );\n    }\n\n    const src = scriptElement.getAttribute(\"src\");\n    if (!src) {\n      throw new Error(\"prism-code-editor script element has no src attribute\");\n    }\n\n    const absoluteSrc = new URL(src, document.baseURI).href;\n    BslibCodeEditor.#basePath = absoluteSrc.replace(/\\/index\\.js$/, \"\");\n    return BslibCodeEditor.#basePath;\n  }\n\n  /** Dynamically imports a language grammar. Cached after first load. */\n  static async #loadLanguage(language: string): Promise<void> {\n    if (BslibCodeEditor.#loadedLanguages.has(language)) {\n      return;\n    }\n    if ([\"plain\", \"plaintext\", \"text\", \"txt\"].includes(language)) {\n      return;\n    }\n    let languageToLoad = language;\n    if (language === \"html\") {\n      languageToLoad = \"markup\";\n    }\n    const basePath = BslibCodeEditor.#getBasePath();\n    await import(`${basePath}/prism/languages/${languageToLoad}.js`);\n    BslibCodeEditor.#loadedLanguages.add(language);\n  }\n\n  /** Loads a theme stylesheet. Themes are cached and never unloaded. */\n  static #loadTheme(themeName: string): void {\n    if (BslibCodeEditor.#loadedThemes.has(themeName)) {\n      return;\n    }\n\n    const linkId = `code-editor-theme-${themeName}`;\n    if (document.getElementById(linkId)) {\n      BslibCodeEditor.#loadedThemes.add(themeName);\n      return;\n    }\n\n    const basePath = BslibCodeEditor.#getBasePath();\n    const newLink = document.createElement(\"link\");\n    newLink.id = linkId;\n    newLink.rel = \"stylesheet\";\n    newLink.href = `${basePath}/themes/${themeName}.css`;\n\n    newLink.addEventListener(\"load\", () => {\n      BslibCodeEditor.#loadedThemes.add(themeName);\n    });\n\n    newLink.addEventListener(\"error\", () => {\n      console.error(`Failed to load code editor theme: ${themeName}`);\n    });\n\n    document.head.appendChild(newLink);\n  }\n\n  private prismEditor?: PrismEditor;\n  private darkLightObserver?: MutationObserver;\n  private initPromise?: Promise<PrismEditor | undefined>;\n  private languageChangePromise?: Promise<void>;\n  private readonlyTooltipCleanup?: () => void;\n\n  // Properties that reflect to/from HTML attributes\n  get language(): string {\n    return this.getAttribute(\"language\") ?? DEFAULT_LANGUAGE;\n  }\n  set language(val: string) {\n    this.setAttribute(\"language\", val);\n  }\n\n  get readonly(): boolean {\n    return (\n      this.hasAttribute(\"readonly\") && this.getAttribute(\"readonly\") !== \"false\"\n    );\n  }\n  set readonly(val: boolean) {\n    this.setAttribute(\"readonly\", String(val));\n  }\n\n  get lineNumbers(): boolean {\n    return this.getAttribute(\"line-numbers\") !== \"false\";\n  }\n  set lineNumbers(val: boolean) {\n    this.setAttribute(\"line-numbers\", String(val));\n  }\n\n  get wordWrap(): boolean {\n    return this.getAttribute(\"word-wrap\") === \"true\";\n  }\n  set wordWrap(val: boolean) {\n    this.setAttribute(\"word-wrap\", String(val));\n  }\n\n  get tabSize(): number {\n    const val = this.getAttribute(\"tab-size\");\n    const parsed = val ? parseInt(val) : DEFAULT_TAB_SIZE;\n    return isNaN(parsed) ? DEFAULT_TAB_SIZE : parsed;\n  }\n  set tabSize(val: number) {\n    this.setAttribute(\"tab-size\", String(val));\n  }\n\n  get insertSpaces(): boolean {\n    return this.getAttribute(\"insert-spaces\") !== \"false\";\n  }\n  set insertSpaces(val: boolean) {\n    this.setAttribute(\"insert-spaces\", String(val));\n  }\n\n  get themeLight(): string {\n    return this.getAttribute(\"theme-light\") ?? DEFAULT_THEME_LIGHT;\n  }\n  set themeLight(val: string) {\n    this.setAttribute(\"theme-light\", val);\n  }\n\n  get themeDark(): string {\n    return this.getAttribute(\"theme-dark\") ?? DEFAULT_THEME_DARK;\n  }\n  set themeDark(val: string) {\n    this.setAttribute(\"theme-dark\", val);\n  }\n\n  /** The current editor content. */\n  get value(): string {\n    return this.prismEditor?.value ?? \"\";\n  }\n  set value(val: string) {\n    if (this.prismEditor) {\n      this.prismEditor.setOptions({ value: val });\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onChangeCallback: (x: boolean) => void = () => {};\n\n  /** Returns the current editor content for Shiny. */\n  getValue(): string | void {\n    if (!this.prismEditor) {\n      return;\n    }\n    return this.value;\n  }\n\n  /** Initializes the editor when the element is added to the DOM. */\n  connectedCallback(): void {\n    // Guard against re-initialization (e.g., element moved in DOM)\n    if (this.prismEditor) return;\n\n    this.initPromise = this._initializeEditor();\n    this.initPromise\n      .then(() => {\n        this.onChangeCallback(false);\n      })\n      .catch((error) => {\n        showShinyClientMessage({\n          headline: \"Code Editor Initialization Error\",\n          message:\n            \"An error occurred while initializing the code editor. See console for details.\",\n          status: \"error\",\n        });\n        console.error(\"Failed to initialize code editor:\", error);\n      });\n\n    const updateCallback = (): void => this.onChangeCallback(true);\n    this.addEventListener(\"bslibCodeEditorUpdate\", updateCallback);\n  }\n\n  /** Cleans up observers when the element is removed from the DOM. */\n  disconnectedCallback(): void {\n    this.darkLightObserver?.disconnect();\n    this.darkLightObserver = undefined;\n    this.readonlyTooltipCleanup?.();\n    this.readonlyTooltipCleanup = undefined;\n    // Theme stylesheets are intentionally kept (shared across editors)\n  }\n\n  /** Responds to attribute changes by updating the prism-code-editor instance. */\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ): void {\n    if (oldValue === newValue || !this.prismEditor) return;\n\n    const editor = this.prismEditor;\n\n    switch (name) {\n      case \"language\":\n        if (newValue) {\n          // Store promise so receiveMessage() can await language loading\n          this.languageChangePromise = this._handleLanguageChange(newValue);\n        }\n        break;\n      case \"readonly\": {\n        const isReadOnly = newValue === \"true\";\n        editor.setOptions({ readOnly: isReadOnly });\n\n        // Setup or cleanup tooltip based on readonly state\n        if (isReadOnly && !this.readonlyTooltipCleanup) {\n          // Setup tooltip when changing to readonly\n          void this._setupReadOnlyTooltip(editor);\n        } else if (!isReadOnly && this.readonlyTooltipCleanup) {\n          // Cleanup tooltip when changing to editable\n          this.readonlyTooltipCleanup();\n          this.readonlyTooltipCleanup = undefined;\n        }\n        break;\n      }\n      case \"line-numbers\":\n        editor.setOptions({ lineNumbers: newValue !== \"false\" });\n        break;\n      case \"word-wrap\":\n        editor.setOptions({ wordWrap: newValue === \"true\" });\n        break;\n      case \"tab-size\": {\n        const tabSize = newValue ? parseInt(newValue) : DEFAULT_TAB_SIZE;\n        if (!isNaN(tabSize)) {\n          editor.setOptions({ tabSize });\n        }\n        break;\n      }\n      case \"insert-spaces\":\n        editor.setOptions({ insertSpaces: newValue !== \"false\" });\n        break;\n      case \"theme-light\":\n        if (newValue) BslibCodeEditor.#loadTheme(newValue);\n        break;\n      case \"theme-dark\":\n        if (newValue) BslibCodeEditor.#loadTheme(newValue);\n        break;\n      default:\n        break;\n    }\n  }\n\n  /** Creates the prism-code-editor instance and sets up event handlers. */\n  private async _initializeEditor(): Promise<PrismEditor | undefined> {\n    const editorContainer = this.querySelector(\".code-editor\");\n    if (!editorContainer) {\n      showShinyClientMessage({\n        headline: \"Code Editor Initialization Error\",\n        message:\n          \"Expected to find `.code-editor` inside `<bslib-code-editor>` container element.\",\n        status: \"error\",\n      });\n      return;\n    }\n\n    const language = this.language;\n    const initialCode = this.getAttribute(\"value\") ?? \"\";\n    this.removeAttribute(\"value\"); // Clean up; value now lives in prismEditor\n    const readOnly = this.readonly;\n    const lineNumbers = this.lineNumbers;\n    const wordWrap = this.wordWrap;\n    const tabSize = this.tabSize;\n    const insertSpaces = this.insertSpaces;\n\n    const basePath = BslibCodeEditor.#getBasePath();\n\n    // Language grammar must load before editor creation\n    await BslibCodeEditor.#loadLanguage(language);\n    const [{ createEditor }, { copyButton }, { defaultCommands }] =\n      await Promise.all([\n        import(`${basePath}/index.js`) as Promise<PrismCodeEditorModule>,\n        import(\n          `${basePath}/extensions/copyButton/index.js`\n        ) as Promise<CopyButtonModule>,\n        import(`${basePath}/extensions/commands.js`) as Promise<CommandsModule>,\n      ]);\n\n    const editor = createEditor(\n      editorContainer as HTMLElement,\n      {\n        language: language,\n        value: initialCode,\n        tabSize: tabSize,\n        insertSpaces: insertSpaces,\n        lineNumbers: lineNumbers,\n        wordWrap: wordWrap,\n        readOnly: readOnly,\n      },\n      copyButton(),\n      defaultCommands()\n    );\n\n    const oldEnterCallback = editor.keyCommandMap.Enter;\n    editor.keyCommandMap.Enter = (\n      e: KeyboardEvent,\n      selection: unknown,\n      value: string\n    ) => {\n      if (e.metaKey || e.ctrlKey) {\n        this.dispatchEvent(new CustomEvent(\"bslibCodeEditorUpdate\"));\n        editorContainer.classList.add(\"code-editor-submit-flash\");\n        setTimeout(() => {\n          editorContainer.classList.remove(\"code-editor-submit-flash\");\n        }, SUBMIT_FLASH_DURATION_MS);\n        return true;\n      }\n      return oldEnterCallback?.(e, selection, value);\n    };\n\n    this.prismEditor = editor;\n    this.darkLightObserver = this._setupThemeWatcher();\n\n    const textarea = this.querySelector(\"textarea\");\n    if (textarea) {\n      textarea.addEventListener(\"blur\", () => {\n        this.dispatchEvent(new CustomEvent(\"bslibCodeEditorUpdate\"));\n      });\n    }\n\n    // Setup read-only tooltip if editor is read-only\n    if (readOnly) {\n      void this._setupReadOnlyTooltip(editor);\n    }\n\n    return editor;\n  }\n\n  /** Watches `data-bs-theme` on `<html>` to switch syntax highlighting themes. */\n  private _setupThemeWatcher(): MutationObserver {\n    const updateTheme = (): void => {\n      const htmlEl = document.documentElement;\n      const theme = htmlEl.getAttribute(\"data-bs-theme\");\n      const themeName = theme === \"dark\" ? this.themeDark : this.themeLight;\n      BslibCodeEditor.#loadTheme(themeName);\n    };\n    updateTheme();\n\n    const observer = new MutationObserver(() => updateTheme());\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"data-bs-theme\"],\n    });\n    return observer;\n  }\n\n  /** Loads a new language grammar and updates the editor. */\n  private async _handleLanguageChange(newLanguage: string): Promise<void> {\n    const editor = this.prismEditor;\n    if (!editor) return;\n\n    try {\n      await BslibCodeEditor.#loadLanguage(newLanguage);\n      editor.setOptions({ language: newLanguage });\n      editor.update();\n    } catch (error) {\n      showShinyClientMessage({\n        headline: \"Code Editor Language Load Error\",\n        message: `Failed to load language '${newLanguage}'. See console for details.`,\n        status: \"error\",\n      });\n      console.error(`Failed to load language '${newLanguage}':`, error);\n    }\n  }\n\n  /**\n   * Sets up a tooltip that appears when user tries to type in a read-only editor.\n   * Stores cleanup function in readonlyTooltipCleanup.\n   * @param editor - The PrismEditor instance\n   */\n  private async _setupReadOnlyTooltip(editor: PrismEditor): Promise<void> {\n    try {\n      const basePath = BslibCodeEditor.#getBasePath();\n      const [{ addTooltip }, { cursorPosition }] = await Promise.all([\n        import(`${basePath}/tooltips.js`) as Promise<TooltipsModule>,\n        import(`${basePath}/extensions/cursor.js`) as Promise<CursorModule>,\n      ]);\n\n      // Apply cursor position extension (required for tooltips)\n      cursorPosition()(editor);\n\n      // Create tooltip element\n      const tooltip = document.createElement(\"div\");\n      tooltip.className = \"code-editor-readonly-tooltip alert alert-danger\";\n      tooltip.textContent = \"Cannot edit read-only editor.\";\n\n      const [show, hide] = addTooltip(editor, tooltip, false);\n\n      // Event handlers\n      const onBeforeInput = (): void => {\n        this.classList.add(\"is-invalid\");\n        show();\n      };\n      const onHide = (): void => {\n        this.classList.remove(\"is-invalid\");\n        hide();\n      };\n\n      // Show tooltip when user tries to type (use capture phase)\n      editor.textarea.addEventListener(\"beforeinput\", onBeforeInput, true);\n\n      // Hide tooltip on cursor movement or click\n      editor.on(\"selectionChange\", onHide);\n      editor.textarea.addEventListener(\"click\", onHide);\n\n      // Store cleanup function\n      this.readonlyTooltipCleanup = (): void => {\n        editor.textarea.removeEventListener(\"beforeinput\", onBeforeInput, true);\n        editor.textarea.removeEventListener(\"click\", onHide);\n        // Note: Cannot easily remove 'on' listener, but editor cleanup will handle it\n        hide();\n      };\n    } catch (error) {\n      console.error(\"Failed to setup read-only tooltip:\", error);\n    }\n  }\n\n  /**\n   * Handles messages from Shiny's `update_code_editor()`.\n   * @param el - The element (unused, required by interface)\n   * @param data - Update data from R\n   */\n  async receiveMessage(\n    el: HTMLElement,\n    data: CodeEditorReceiveMessageData\n  ): Promise<void> {\n    if (this.initPromise) {\n      await this.initPromise;\n    }\n\n    if (!this.prismEditor) {\n      showShinyClientMessage({\n        headline: \"Code Editor could not update\",\n        message:\n          \"An update was ignored because the editor is not yet initialized.\",\n        status: \"warning\",\n      });\n      return;\n    }\n\n    if (hasDefinedProperty(data, \"value\")) {\n      this.value = data.value ?? \"\";\n    }\n\n    if (hasDefinedProperty(data, \"label\")) {\n      const labelEl = $(this).find(\"label\");\n      await updateLabel(data.label, labelEl);\n    }\n\n    // Properties set via setters trigger attributeChangedCallback\n    if (hasDefinedProperty(data, \"tab_size\") && data.tab_size !== undefined) {\n      this.tabSize = data.tab_size;\n    }\n    if (hasDefinedProperty(data, \"indentation\")) {\n      this.insertSpaces = data.indentation === \"space\";\n    }\n    if (hasDefinedProperty(data, \"read_only\") && data.read_only !== undefined) {\n      this.readonly = data.read_only;\n    }\n    if (\n      hasDefinedProperty(data, \"line_numbers\") &&\n      data.line_numbers !== undefined\n    ) {\n      this.lineNumbers = data.line_numbers;\n    }\n    if (hasDefinedProperty(data, \"word_wrap\") && data.word_wrap !== undefined) {\n      this.wordWrap = data.word_wrap;\n    }\n    if (hasDefinedProperty(data, \"language\") && data.language) {\n      this.language = data.language;\n      // Wait for async language loading before notifying Shiny\n      if (this.languageChangePromise) {\n        await this.languageChangePromise;\n        this.languageChangePromise = undefined;\n      }\n    }\n    if (hasDefinedProperty(data, \"theme_light\") && data.theme_light) {\n      this.themeLight = data.theme_light;\n    }\n    if (hasDefinedProperty(data, \"theme_dark\") && data.theme_dark) {\n      this.themeDark = data.theme_dark;\n    }\n\n    this.dispatchEvent(new CustomEvent(\"bslibCodeEditorUpdate\"));\n  }\n}\n\ncustomElements.define(BslibCodeEditor.tagName, BslibCodeEditor);\n\nif (window.Shiny) {\n  makeInputBinding<string>(BslibCodeEditor.tagName);\n}\n"],
  "mappings": "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",
  "names": []
}
