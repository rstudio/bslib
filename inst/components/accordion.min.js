"use strict";(()=>{var h=Object.defineProperty,g=Object.defineProperties;var f=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var m=(s,e,t)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,d=(s,e)=>{for(var t in e||(e={}))M.call(e,t)&&m(s,t,e[t]);if(a)for(var t of a(e))y.call(e,t)&&m(s,t,e[t]);return s},p=(s,e)=>g(s,f(e));var I=window.Shiny?Shiny.InputBinding:class{},c=class extends I{find(e){return $(e).find(".accordion.bslib-accordion-input")}getValue(e){let n=this._getItems(e).filter(o=>o.selected).map(o=>o.value);return n.length===0?null:n}subscribe(e,t){$(e).on("shown.bs.collapse.accordionInputBinding hidden.bs.collapse.accordionInputBinding",function(n){t(!0)})}unsubscribe(e){$(e).off(".accordionInputBinding")}receiveMessage(e,t){let n=t.method;if(n==="select")this._selectItems(e,t);else if(n==="remove")this._removeItem(e,t);else if(n==="insert")this._insertItem(e,t);else if(n==="update")this._updateItem(e,t);else throw new Error(`Method not yet implemented: ${n}`)}_selectItems(e,t){let n=this._getItems(e),o=t.value!==!0?t.value:n.map(r=>r.value),i=this._isAutoClosing(e);i&&(o=o.slice(o.length-1,o.length)),n=n.map(r=>p(d({},r),{show:o.indexOf(r.value)>-1}));let u=n.some(r=>r.show);n.forEach(r=>{if(r.show){let l=r.item.querySelector(".accordion-collapse:not(.show)");l&&$(l).collapse("show")}else{if(!t.close||i&&u)return;let l=r.item.querySelector(".accordion-collapse.show");l&&$(l).collapse("hide")}})}_insertItem(e,t){let n=this._findItem(e,t.target);n||(n=t.position==="before"?e.firstElementChild:e.lastElementChild);let o=t.panel;if(n?Shiny.renderContent(n,o,t.position==="before"?"beforeBegin":"afterEnd"):Shiny.renderContent(e,o),this._isAutoClosing(e)){let i=$(o.html).attr("data-value");$(e).find(`[data-value="${i}"] .accordion-collapse`).attr("data-bs-parent","#"+e.id)}}_removeItem(e,t){this._getItems(e).filter(o=>t.target.indexOf(o.value)>-1).forEach(o=>o.item.remove())}_updateItem(e,t){let n=this._findItem(e,t.target);if(!n)throw new Error(`Unable to find an accordion_panel() with a value of ${t.target}`);if(t.hasOwnProperty("value")&&(n.dataset.value=t.value),t.hasOwnProperty("body")){let i=n.querySelector(":scope > .accordion-body");Shiny.renderContent(i,t.body)}let o=n.querySelector(":scope > .accordion-header");if(t.hasOwnProperty("title")){let i=o.querySelector(".accordion-title");Shiny.renderContent(i,t.title)}if(t.hasOwnProperty("icon")){let i=o.querySelector(".accordion-button > .accordion-icon");Shiny.renderContent(i,t.icon)}}_getItems(e){let t=Array.from(e.querySelectorAll(":scope > .accordion-item"));return t.length===0?[]:t.map(n=>this._getItemInfo(n))}_findItem(e,t){return e.querySelector(`[data-value="${t}"]`)}_getItemInfo(e){let t=e.querySelector(":scope > .accordion-collapse");return{item:e,value:e.dataset.value,selected:t.classList.contains("show")}}_isAutoClosing(e){return e.classList.contains("autoclose")}};window.Shiny&&Shiny.inputBindings.register(new c,"bslib.accordion");})();
//# sourceMappingURL=accordion.min.js.map
