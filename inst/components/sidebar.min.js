/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var O=window.Shiny?Shiny.InputBinding:class{};function N(b,t){window.Shiny&&Shiny.inputBindings.register(new b,"bslib."+t)}function B(b){if($(b).data("window-resize-observer"))return;let t=new Event("resize"),r=new ResizeObserver(()=>{window.dispatchEvent(t)});r.observe(b),$(b).data("window-resize-observer",r)}var P=function(b,t,r){"use strict";if(!b.MutationObserver||typeof HTMLElement=="undefined")return;var d=0,l=function(){var f=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(s,i){return s instanceof HTMLElement&&f.call(s,i)},addMethod:function(s,i,u){var o=s[i];s[i]=function(){if(u.length==arguments.length)return u.apply(this,arguments);if(typeof o=="function")return o.apply(this,arguments)}},callCallbacks:function(s,i){i&&i.options.onceOnly&&i.firedElems.length==1&&(s=[s[0]]);for(var u=0,o;o=s[u];u++)o&&o.callback&&o.callback.call(o.elem,o.elem);i&&i.options.onceOnly&&i.firedElems.length==1&&i.me.unbindEventWithSelectorAndCallback.call(i.target,i.selector,i.callback)},checkChildNodesRecursively:function(s,i,u,o){for(var n=0,e;e=s[n];n++)u(e,i,o)&&o.push({callback:i.callback,elem:e}),e.childNodes.length>0&&l.checkChildNodesRecursively(e.childNodes,i,u,o)},mergeArrays:function(s,i){var u={},o;for(o in s)s.hasOwnProperty(o)&&(u[o]=s[o]);for(o in i)i.hasOwnProperty(o)&&(u[o]=i[o]);return u},toElementsArray:function(s){return typeof s!="undefined"&&(typeof s.length!="number"||s===b)&&(s=[s]),s}}}(),g=function(){var f=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return f.prototype.addEvent=function(s,i,u,o){var n={target:s,selector:i,options:u,callback:o,firedElems:[]};return this._beforeAdding&&this._beforeAdding(n),this._eventsBucket.push(n),n},f.prototype.removeEvent=function(s){for(var i=this._eventsBucket.length-1,u;u=this._eventsBucket[i];i--)if(s(u)){this._beforeRemoving&&this._beforeRemoving(u);var o=this._eventsBucket.splice(i,1);o&&o.length&&(o[0].callback=null)}},f.prototype.beforeAdding=function(s){this._beforeAdding=s},f.prototype.beforeRemoving=function(s){this._beforeRemoving=s},f}(),E=function(f,s){var i=new g,u=this,o={fireOnAttributesModification:!1};return i.beforeAdding(function(n){var e=n.target,a;(e===b.document||e===b)&&(e=document.getElementsByTagName("html")[0]),a=new MutationObserver(function(c){s.call(this,c,n)});var v=f(n.options);a.observe(e,v),n.observer=a,n.me=u}),i.beforeRemoving(function(n){n.observer.disconnect()}),this.bindEvent=function(n,e,a){e=l.mergeArrays(o,e);for(var v=l.toElementsArray(this),c=0;c<v.length;c++)i.addEvent(v[c],n,e,a)},this.unbindEvent=function(){var n=l.toElementsArray(this);i.removeEvent(function(e){for(var a=0;a<n.length;a++)if(this===r||e.target===n[a])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(n){var e=l.toElementsArray(this),a=n,v;typeof n=="function"?v=function(c){for(var h=0;h<e.length;h++)if((this===r||c.target===e[h])&&c.callback===a)return!0;return!1}:v=function(c){for(var h=0;h<e.length;h++)if((this===r||c.target===e[h])&&c.selector===n)return!0;return!1},i.removeEvent(v)},this.unbindEventWithSelectorAndCallback=function(n,e){var a=l.toElementsArray(this);i.removeEvent(function(v){for(var c=0;c<a.length;c++)if((this===r||v.target===a[c])&&v.selector===n&&v.callback===e)return!0;return!1})},this},w=function(){var f={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function s(n){var e={attributes:!1,childList:!0,subtree:!0};return n.fireOnAttributesModification&&(e.attributes=!0),e}function i(n,e){n.forEach(function(a){var v=a.addedNodes,c=a.target,h=[],S;v!==null&&v.length>0?l.checkChildNodesRecursively(v,e,u,h):a.type==="attributes"&&u(c,e,h)&&h.push({callback:e.callback,elem:c}),l.callCallbacks(h,e)})}function u(n,e,a){return l.matchesSelector(n,e.selector)&&(n._id===r&&(n._id=d++),e.firedElems.indexOf(n._id)==-1)?(e.firedElems.push(n._id),!0):!1}L=new E(s,i);var o=L.bindEvent;return L.bindEvent=function(n,e,a){typeof a=="undefined"?(a=e,e=f):e=l.mergeArrays(f,e);var v=l.toElementsArray(this);if(e.existing){for(var c=[],h=0;h<v.length;h++)for(var S=v[h].querySelectorAll(n),C=0;C<S.length;C++)c.push({callback:a,elem:S[C]});if(e.onceOnly&&c.length)return a.call(c[0].elem,c[0].elem);setTimeout(l.callCallbacks,1,c)}o.call(this,n,e,a)},L},m=function(){var f={};function s(){var n={childList:!0,subtree:!0};return n}function i(n,e){n.forEach(function(a){var v=a.removedNodes,c=[];v!==null&&v.length>0&&l.checkChildNodesRecursively(v,e,u,c),l.callCallbacks(c,e)})}function u(n,e){return l.matchesSelector(n,e.selector)}M=new E(s,i);var o=M.bindEvent;return M.bindEvent=function(n,e,a){typeof a=="undefined"?(a=e,e=f):e=l.mergeArrays(f,e),o.call(this,n,e,a)},M},L=new w,M=new m;function T(f,s,i){l.addMethod(s,i,f.unbindEvent),l.addMethod(s,i,f.unbindEventWithSelectorOrCallback),l.addMethod(s,i,f.unbindEventWithSelectorAndCallback)}function A(f){f.arrive=L.bindEvent,T(L,f,"unbindArrive"),f.leave=M.bindEvent,T(M,f,"unbindLeave")}t&&A(t.fn),A(HTMLElement.prototype),A(NodeList.prototype),A(HTMLCollection.prototype),A(HTMLDocument.prototype),A(Window.prototype);var H={};return T(L,H,"unbindAllArrive"),T(M,H,"unbindAllLeave"),H}(window,typeof jQuery=="undefined"?null:jQuery,void 0);var p=class{static initCollapsible(t){t.removeAttribute("data-bslib-sidebar-init"),p._initEventListeners(t),p._initSidebarCounters(t),p._initDesktop(t)}static _initEventListeners(t){var l;let{sidebar:r,toggle:d}=p.components(t);d.handlers={start:g=>{g.preventDefault(),p.toggle(t,"toggle")},end:()=>{p.finalizeState(t),$(r).trigger("toggleCollapse.sidebarInputBinding")}},d.addEventListener("click",d.handlers.start),(l=d.querySelector(".collapse-icon"))==null||l.addEventListener("transitionend",d.handlers.end)}static _initSidebarCounters(t){let r=`.${p.classes.LAYOUT}> .main > .${p.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`;if(!(t.querySelector(r)===null))return;function l(m){return m=m?m.parentElement:null,m&&m.classList.contains("main")&&(m=m.parentElement),m&&m.classList.contains(p.classes.LAYOUT)?m:null}let g=[t],E=l(t);for(;E;)g.unshift(E),E=l(E);let w={left:0,right:0};g.forEach(function(m,L){m.style.setProperty("--bslib-sidebar-counter",L.toString());let T=m.classList.contains("sidebar-right")?w.right++:w.left++;m.style.setProperty("--bslib-sidebar-overlap-counter",T.toString())})}static _initDesktop(t){var d;if(((d=t.dataset.bslibSidebarOpen)==null?void 0:d.trim())!=="desktop")return;window.getComputedStyle(t).getPropertyValue("--bslib-sidebar-js-init-collapsed").trim()==="true"&&p.toggle(t,"close")}static _findLayoutContainer(t){let r=t.closest(`.${p.classes.LAYOUT}`);if(!r)throw new Error(`Expected container or direct ancestor with class ${p.classes.LAYOUT}`);return r}static components(t){t=p._findLayoutContainer(t);let r=t.querySelector(":scope > .main"),d=t.querySelector(":scope > .sidebar"),l=t.querySelector(":scope > .collapse-toggle"),g=t.classList.contains(p.classes.COLLAPSE);return{container:t,main:r,sidebar:d,toggle:l,isClosed:g}}static toggle(t,r){let{container:d,main:l,sidebar:g,isClosed:E}=p.components(t);if(["open","close","toggle"].indexOf(r)===-1)throw new Error(`Unknown method ${r}`);r==="toggle"&&(r=E?"open":"close"),!(E&&r==="close"||!E&&r==="open")&&(B(l),r==="open"&&(g.hidden=!1),d.classList.add(p.classes.TRANSITIONING),d.classList.toggle(p.classes.COLLAPSE))}static finalizeState(t,r=!1){let{container:d,sidebar:l,toggle:g,isClosed:E}=p.components(t);return E&&!r?setTimeout(()=>p.finalizeState(t,!0),100):(d.classList.remove(p.classes.TRANSITIONING),l.hidden=E,g.ariaExpanded=E?"false":"true"),l}static removeEventListeners(t){var d;let{toggle:r}=p.components(t);r.handlers&&(r.removeEventListener("click",r.handlers.start),(d=r.querySelector(".collapse-icon"))==null||d.removeEventListener("transitionend",r.handlers.end))}},y=p;y.classes={LAYOUT:"bslib-sidebar-layout",COLLAPSE:"sidebar-collapsed",TRANSITIONING:"transitioning"};var k=class extends O{find(t){return $(t).find(`.${y.classes.LAYOUT} > .bslib-sidebar-input`)}getValue(t){return!$(t).parent().hasClass(y.classes.COLLAPSE)}setValue(t,r){let d=r?"open":"close";this.receiveMessage(t,{method:d})}subscribe(t,r){$(t).on("toggleCollapse.sidebarInputBinding",function(d){r(!0)})}unsubscribe(t){$(t).off(".sidebarInputBinding")}receiveMessage(t,r){y.toggle(t,r.method)}};N(k,"sidebar");document.arrive(`.${y.classes.LAYOUT}[data-bslib-sidebar-init]`,b=>{console.log("arrive",b),y.initCollapsible(b)});document.leave(`.${y.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`,b=>{console.log("leave",b),y.removeEventListeners(b)});window.bslib=window.bslib||{};window.bslib.Sidebar=y;})();
//# sourceMappingURL=sidebar.min.js.map
