/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var u=window.Shiny?Shiny.InputBinding:class{};function L(s,e){window.Shiny&&Shiny.inputBindings.register(new s,"bslib."+e)}function g(s){if($(s).data("window-resize-observer"))return;let e=new Event("resize"),n=new ResizeObserver(()=>{window.dispatchEvent(e)});n.observe(s),$(s).data("window-resize-observer",n)}var t=class{static initSidebar(e){let n=t._findLayoutContainer(e);if(n.removeChild(e),n.getElementsByClassName(t.LAYOUT_CLASS).length>0){t._initAutoCollapse(n);return}function l(i){return i=i?i.parentElement:null,i&&i.classList.contains("main")&&(i=i.parentElement),i&&i.classList.contains(t.LAYOUT_CLASS)?i:null}let a=[n],d=l(e);for(;d;)a.unshift(d),d=l(e);let p={left:0,right:0};a.forEach(function(i,b){i.style.setProperty("--bslib-sidebar-counter",b.toString());let m=i.classList.contains("sidebar-right")?p.right++:p.left++;i.style.setProperty("--bslib-sidebar-overlap-counter",m.toString())}),t._initAutoCollapse(n)}static _initAutoCollapse(e){if(!e.dataset.sidebarInitAutoCollapse)return;window.getComputedStyle(e).getPropertyValue("--bslib-sidebar-js-init-collapsed")==="true"&&t.toggleCollapse(e,"close")}static _findLayoutContainer(e){if(e.classList.contains(t.LAYOUT_CLASS))return e;let n=e.closest(`.${t.LAYOUT_CLASS}`);if(!n)throw new Error(`Expected container or direct ancestor with class ${t.LAYOUT_CLASS}`);return n}static sidebarComponents(e){e=t._findLayoutContainer(e);let n=e.querySelector(":scope > .main"),o=e.querySelector(":scope > .sidebar"),l=e.querySelector(":scope > .collapse-toggle"),a=e.classList.contains(t.COLLAPSE_CLASS);return{container:e,main:n,sidebar:o,toggle:l,isClosed:a}}static toggleCollapse(e,n){let{container:o,main:l,sidebar:a,isClosed:d}=t.sidebarComponents(e);if(n===null&&(n=d?"open":"close"),n!=="open"&&n!=="close")throw new Error(`Unknown method ${n}`);d&&n==="close"||!d&&n==="open"||(g(l),n==="open"&&(a.hidden=!1),o.classList.add("transitioning"),o.classList.toggle(t.COLLAPSE_CLASS))}static finalizeState(e){let{container:n,sidebar:o,toggle:l,isClosed:a}=t.sidebarComponents(e);return n.classList.remove("transitioning"),o.hidden=a,l.ariaExpanded=a?"false":"true",o}},r=t;r.COLLAPSE_CLASS="sidebar-collapsed",r.LAYOUT_CLASS="bslib-sidebar-layout";var c=class extends u{find(e){return $(e).find(`.${r.LAYOUT_CLASS} > .bslib-sidebar-input`)}getValue(e){return!$(e).parent().hasClass(r.COLLAPSE_CLASS)}setValue(e,n){let o=n?"open":"close";this.receiveMessage(e,{method:o})}subscribe(e,n){$(e).on("toggleCollapse.sidebarInputBinding",function(o){n(!0)})}unsubscribe(e){$(e).off(".sidebarInputBinding")}receiveMessage(e,n){r.toggleCollapse(e,n.method)}};L(c,"sidebar");$(document).on("click",`.${r.LAYOUT_CLASS} > .collapse-toggle`,s=>{s.preventDefault(),r.toggleCollapse(s.target,null)});$(document).on("transitionend",".bslib-sidebar-layout > .collapse-toggle > .collapse-icon",s=>{let e=r.finalizeState(s.target);$(e).trigger("toggleCollapse.sidebarInputBinding")});window.BslibSidebar=r;})();
//# sourceMappingURL=sidebar.min.js.map
