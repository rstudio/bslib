/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var p=window.Shiny?Shiny.InputBinding:class{};function g(u,e){window.Shiny&&Shiny.inputBindings.register(new u,"bslib."+e)}var c=class{constructor(){this.resizeObserverEntries=[],this.resizeObserver=new ResizeObserver(e=>{let t=new Event("resize");if(window.dispatchEvent(t),!window.Shiny)return;let i=[];for(let r of e)r.target instanceof HTMLElement&&r.target.querySelector(".shiny-bound-output")&&(r.target.querySelectorAll(".shiny-bound-output").forEach(o=>{if(i.includes(o))return;let{binding:l,onResize:d}=$(o).data("shinyOutputBinding");if(!l||!l.resize)return;let n=o.shinyResizeObserver;n&&n!==this||(o.shinyResizeObserver=this,d(o),i.push(o))}),r.target.querySelectorAll('.shiny-plot-output img:not([width="100%"])').forEach(o=>{o.setAttribute("width","100%")}))})}observe(e){this.resizeObserver.observe(e),this.resizeObserverEntries.push(e)}unobserve(e){let t=this.resizeObserverEntries.indexOf(e);t<0||(this.resizeObserver.unobserve(e),this.resizeObserverEntries.splice(t,1))}flush(){this.resizeObserverEntries.forEach(e=>{document.body.contains(e)||this.unobserve(e)})}};var s=class{constructor(e){if(s.instanceMap.set(e,this),this.layout={container:e,main:e.querySelector(":scope > .main"),sidebar:e.querySelector(":scope > .sidebar"),toggle:e.querySelector(":scope > .collapse-toggle")},!this.layout.toggle)throw new Error("Tried to initialize a non-collapsible sidebar.");this._initEventListeners(),this._initSidebarCounters(),this._initDesktop(),s.shinyResizeObserver.observe(this.layout.main),e.removeAttribute("data-bslib-sidebar-init");let t=e.querySelector(":scope > script[data-bslib-sidebar-init]");t&&e.removeChild(t)}get isClosed(){return this.layout.container.classList.contains(s.classes.COLLAPSE)}static getInstance(e){return s.instanceMap.get(e)}static initCollapsibleAll(e=!0){if(document.readyState==="loading"){s.onReadyScheduled||(s.onReadyScheduled=!0,document.addEventListener("DOMContentLoaded",()=>{s.initCollapsibleAll(!1)}));return}let t=`.${s.classes.LAYOUT}[data-bslib-sidebar-init]`;if(!document.querySelector(t))return;e&&s.shinyResizeObserver.flush(),document.querySelectorAll(t).forEach(r=>new s(r))}_initEventListeners(){var i;let{sidebar:e,toggle:t}=this.layout;t.addEventListener("click",r=>{r.preventDefault(),this.toggle("toggle")}),(i=t.querySelector(".collapse-icon"))==null||i.addEventListener("transitionend",()=>{this._finalizeState(),$(e).trigger("toggleCollapse.sidebarInputBinding")})}_initSidebarCounters(){let{container:e}=this.layout,t=`.${s.classes.LAYOUT}> .main > .${s.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`;if(!(e.querySelector(t)===null))return;function r(n){return n=n?n.parentElement:null,n&&n.classList.contains("main")&&(n=n.parentElement),n&&n.classList.contains(s.classes.LAYOUT)?n:null}let o=[e],l=r(e);for(;l;)o.unshift(l),l=r(l);let d={left:0,right:0};o.forEach(function(n,y){n.style.setProperty("--bslib-sidebar-counter",y.toString());let h=n.classList.contains("sidebar-right")?d.right++:d.left++;n.style.setProperty("--bslib-sidebar-overlap-counter",h.toString())})}_initDesktop(){var i;let{container:e}=this.layout;if(((i=e.dataset.bslibSidebarOpen)==null?void 0:i.trim())!=="desktop")return;window.getComputedStyle(e).getPropertyValue("--bslib-sidebar-js-init-collapsed").trim()==="true"&&this.toggle("close")}toggle(e){typeof e=="undefined"&&(e="toggle");let{container:t,sidebar:i}=this.layout,r=this.isClosed;if(["open","close","toggle"].indexOf(e)===-1)throw new Error(`Unknown method ${e}`);e==="toggle"&&(e=r?"open":"close"),!(r&&e==="close"||!r&&e==="open")&&(e==="open"&&(i.hidden=!1),t.classList.add(s.classes.TRANSITIONING),t.classList.toggle(s.classes.COLLAPSE))}_finalizeState(){let{container:e,sidebar:t,toggle:i}=this.layout;e.classList.remove(s.classes.TRANSITIONING),t.hidden=this.isClosed,i.ariaExpanded=this.isClosed?"false":"true"}},a=s;a.shinyResizeObserver=new c,a.classes={LAYOUT:"bslib-sidebar-layout",COLLAPSE:"sidebar-collapsed",TRANSITIONING:"transitioning"},a.onReadyScheduled=!1,a.instanceMap=new WeakMap;var b=class extends p{find(e){return $(e).find(`.${a.classes.LAYOUT} > .bslib-sidebar-input`)}getValue(e){let t=a.getInstance(e.parentElement);return t?t.isClosed:!1}setValue(e,t){let i=t?"open":"close";this.receiveMessage(e,{method:i})}subscribe(e,t){$(e).on("toggleCollapse.sidebarInputBinding",function(i){t(!0)})}unsubscribe(e){$(e).off(".sidebarInputBinding")}receiveMessage(e,t){let i=a.getInstance(e.parentElement);i&&i.toggle(t.method)}};g(b,"sidebar");window.bslib=window.bslib||{};window.bslib.Sidebar=a;})();
//# sourceMappingURL=sidebar.min.js.map
