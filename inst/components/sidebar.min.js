/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var y=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var u=(i,e,t)=>(y(i,e,"read from private field"),t?t.call(i):e.get(i)),m=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},p=(i,e,t,n)=>(y(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t);var f=window.Shiny?Shiny.InputBinding:class{};function h(i,e){window.Shiny&&Shiny.inputBindings.register(new i,"bslib."+e)}function L(i){if($(i).data("window-resize-observer"))return;let e=new Event("resize"),t=new ResizeObserver(()=>{window.dispatchEvent(e)});t.observe(i),$(i).data("window-resize-observer",t)}var d,s=class{constructor(e){m(this,d,!1);if(e.removeAttribute("data-bslib-sidebar-init"),s.instanceMap.set(e,this),this.layout={container:e,main:e.querySelector(":scope > .main"),sidebar:e.querySelector(":scope > .sidebar"),toggle:e.querySelector(":scope > .collapse-toggle")},!this.layout.toggle)throw new Error("Tried to initialize a non-collapsible sidebar.");p(this,d,this._isClosedOrClosing()),this._initEventListeners(),this._initSidebarCounters(),this._initDesktop()}get isClosed(){return u(this,d)}_isClosedOrClosing(){return this.layout.container.classList.contains(s.classes.COLLAPSE)}static getInstance(e){return s.instanceMap.get(e)}static initCollapsibleAll(e){if(document.readyState==="loading"){s.onReadyScheduled||(s.onReadyScheduled=!0,document.addEventListener("DOMContentLoaded",()=>s.initCollapsibleAll(document)));return}let t="[data-bslib-sidebar-init]",n=!1;if(e instanceof HTMLElement&&(n=e.matches(t)),!(n||e.querySelector(t)))return;let a=Array.from(e.querySelectorAll(t));n&&e instanceof HTMLElement&&a.unshift(e),a.forEach(l=>new s(l))}_initEventListeners(){var n;let{sidebar:e,toggle:t}=this.layout;t.addEventListener("click",a=>{a.preventDefault(),this.toggle("toggle")}),(n=t.querySelector(".collapse-icon"))==null||n.addEventListener("transitionend",()=>{setTimeout(()=>{this._finalizeState(),$(e).trigger("toggleCollapse.sidebarInputBinding")},this.isClosed?100:0)})}_initSidebarCounters(){let{container:e}=this.layout,t=`.${s.classes.LAYOUT}> .main > .${s.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`;if(!(e.querySelector(t)===null))return;function a(o){return o=o?o.parentElement:null,o&&o.classList.contains("main")&&(o=o.parentElement),o&&o.classList.contains(s.classes.LAYOUT)?o:null}let l=[e],c=a(e);for(;c;)l.unshift(c),c=a(c);let g={left:0,right:0};l.forEach(function(o,E){o.style.setProperty("--bslib-sidebar-counter",E.toString());let T=o.classList.contains("sidebar-right")?g.right++:g.left++;o.style.setProperty("--bslib-sidebar-overlap-counter",T.toString())})}_initDesktop(){var n;let{container:e}=this.layout;if(((n=e.dataset.bslibSidebarOpen)==null?void 0:n.trim())!=="desktop")return;window.getComputedStyle(e).getPropertyValue("--bslib-sidebar-js-init-collapsed").trim()==="true"&&this.toggle("close")}toggle(e){let{container:t,main:n,sidebar:a}=this.layout,l=this._isClosedOrClosing();if(["open","close","toggle"].indexOf(e)===-1)throw new Error(`Unknown method ${e}`);e==="toggle"&&(e=l?"open":"close"),!(l&&e==="close"||!l&&e==="open")&&(L(n),e==="open"&&(a.hidden=!1),t.classList.add(s.classes.TRANSITIONING),t.classList.toggle(s.classes.COLLAPSE))}_finalizeState(){let{container:e,sidebar:t,toggle:n}=this.layout;e.classList.remove(s.classes.TRANSITIONING),p(this,d,e.classList.contains(s.classes.COLLAPSE)),t.hidden=u(this,d),n.ariaExpanded=u(this,d)?"false":"true"}},r=s;d=new WeakMap,r.classes={LAYOUT:"bslib-sidebar-layout",COLLAPSE:"sidebar-collapsed",TRANSITIONING:"transitioning"},r.onReadyScheduled=!1,r.instanceMap=new WeakMap;var b=class extends f{find(e){return $(e).find(`.${r.classes.LAYOUT} > .bslib-sidebar-input`)}getValue(e){let t=r.getInstance(e.parentElement);return t?t.isClosed:!1}setValue(e,t){let n=t?"open":"close";this.receiveMessage(e,{method:n})}subscribe(e,t){$(e).on("toggleCollapse.sidebarInputBinding",function(n){t(!0)})}unsubscribe(e){$(e).off(".sidebarInputBinding")}receiveMessage(e,t){let n=r.getInstance(e.parentElement);n&&n.toggle(t.method)}};h(b,"sidebar");window.bslib=window.bslib||{};window.bslib.Sidebar=r;})();
//# sourceMappingURL=sidebar.min.js.map
