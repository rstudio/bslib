/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var p=window.Shiny?Shiny.InputBinding:class{};function m(l,e){window.Shiny&&Shiny.inputBindings.register(new l,"bslib."+e)}function g(l){if($(l).data("window-resize-observer"))return;let e=new Event("resize"),t=new ResizeObserver(()=>{window.dispatchEvent(e)});t.observe(l),$(l).data("window-resize-observer",t)}var c=class{constructor(e){let t=n=>{for(let i of n)if(i.type==="childList"){for(let o of i.addedNodes)o.nodeType===Node.ELEMENT_NODE&&this._callback(o,this.config.added);for(let o of i.removedNodes)o.nodeType===Node.ELEMENT_NODE&&this._callback(o,this.config.removed)}};this.config=e,this.observer=new MutationObserver(t),document.readyState==="complete"?this.connect():document.addEventListener("DOMContentLoaded",()=>this.connect())}_callback(e,{selector:t,callback:n}){let i=e.matches(t),o=e.querySelector(t);!i&&!o||(i&&n(e),o&&e.querySelectorAll(t).forEach(r=>n(r)))}connect(){this._callback(document.body,this.config.added),this.observer.observe(document,{childList:!0,subtree:!0})}disconnect(){this.observer.disconnect()}};var s=class{static initCollapsible(e){e.removeAttribute("data-bslib-sidebar-init"),s._initEventListeners(e),s._initSidebarCounters(e),s._initDesktop(e)}static _initEventListeners(e){var i;let{sidebar:t,toggle:n}=s.components(e);n.handlers={start:o=>{o.preventDefault(),s.toggle(e,"toggle")},end:()=>{s.finalizeState(e),$(t).trigger("toggleCollapse.sidebarInputBinding")}},n.addEventListener("click",n.handlers.start),(i=n.querySelector(".collapse-icon"))==null||i.addEventListener("transitionend",n.handlers.end)}static _initSidebarCounters(e){let t=`.${s.classes.LAYOUT}> .main > .${s.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`;if(!(e.querySelector(t)===null))return;function i(a){return a=a?a.parentElement:null,a&&a.classList.contains("main")&&(a=a.parentElement),a&&a.classList.contains(s.classes.LAYOUT)?a:null}let o=[e],r=i(e);for(;r;)o.unshift(r),r=i(r);let u={left:0,right:0};o.forEach(function(a,L){a.style.setProperty("--bslib-sidebar-counter",L.toString());let f=a.classList.contains("sidebar-right")?u.right++:u.left++;a.style.setProperty("--bslib-sidebar-overlap-counter",f.toString())})}static _initDesktop(e){var n;if(((n=e.dataset.bslibSidebarOpen)==null?void 0:n.trim())!=="desktop")return;window.getComputedStyle(e).getPropertyValue("--bslib-sidebar-js-init-collapsed").trim()==="true"&&s.toggle(e,"close")}static _findLayoutContainer(e){let t=e.closest(`.${s.classes.LAYOUT}`);if(!t)throw new Error(`Expected container or direct ancestor with class ${s.classes.LAYOUT}`);return t}static components(e){e=s._findLayoutContainer(e);let t=e.querySelector(":scope > .main"),n=e.querySelector(":scope > .sidebar"),i=e.querySelector(":scope > .collapse-toggle"),o=e.classList.contains(s.classes.COLLAPSE);return{container:e,main:t,sidebar:n,toggle:i,isClosed:o}}static toggle(e,t){let{container:n,main:i,sidebar:o,isClosed:r}=s.components(e);if(["open","close","toggle"].indexOf(t)===-1)throw new Error(`Unknown method ${t}`);t==="toggle"&&(t=r?"open":"close"),!(r&&t==="close"||!r&&t==="open")&&(g(i),t==="open"&&(o.hidden=!1),n.classList.add(s.classes.TRANSITIONING),n.classList.toggle(s.classes.COLLAPSE))}static finalizeState(e,t=!1){let{container:n,sidebar:i,toggle:o,isClosed:r}=s.components(e);return r&&!t?setTimeout(()=>s.finalizeState(e,!0),100):(n.classList.remove(s.classes.TRANSITIONING),i.hidden=r,o.ariaExpanded=r?"false":"true"),i}static removeEventListeners(e){var n;let{toggle:t}=s.components(e);t.handlers&&(t.removeEventListener("click",t.handlers.start),(n=t.querySelector(".collapse-icon"))==null||n.removeEventListener("transitionend",t.handlers.end))}},d=s;d.classes={LAYOUT:"bslib-sidebar-layout",COLLAPSE:"sidebar-collapsed",TRANSITIONING:"transitioning"};var b=class extends p{find(e){return $(e).find(`.${d.classes.LAYOUT} > .bslib-sidebar-input`)}getValue(e){return!$(e).parent().hasClass(d.classes.COLLAPSE)}setValue(e,t){let n=t?"open":"close";this.receiveMessage(e,{method:n})}subscribe(e,t){$(e).on("toggleCollapse.sidebarInputBinding",function(n){t(!0)})}unsubscribe(e){$(e).off(".sidebarInputBinding")}receiveMessage(e,t){d.toggle(e,t.method)}};m(b,"sidebar");var v=new c({added:{selector:`.${d.classes.LAYOUT}[data-bslib-sidebar-init]`,callback:l=>{d.initCollapsible(l)}},removed:{selector:`.${d.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`,callback:l=>{d.removeEventListeners(l)}}});window.bslib=window.bslib||{};window.bslib.Sidebar=d;window.bslib.SidebarObserver=v;})();
//# sourceMappingURL=sidebar.min.js.map
