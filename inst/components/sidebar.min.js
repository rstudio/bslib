/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var g=window.Shiny?Shiny.InputBinding:class{};function y(u,e){window.Shiny&&Shiny.inputBindings.register(new u,"bslib."+e)}var c=class{constructor(){this.resizeObserverEntries=[],this.resizeObserver=new ResizeObserver(e=>{let t=new Event("resize");if(window.dispatchEvent(t),!window.Shiny)return;let i=[];for(let n of e)!(n.target instanceof HTMLElement)||!n.target.querySelector(".shiny-bound-output")||(n.target.querySelectorAll(".shiny-bound-output").forEach(o=>{if(i.includes(o))return;let{binding:l,onResize:r}=$(o).data("shinyOutputBinding");if(!l||!l.resize)return;let d=o.shinyResizeObserver;d&&d!==this||(o.shinyResizeObserver=this,r(o),i.push(o))}),!n.target.querySelector('.shiny-plot-output img:not([width="100%"])'))||n.target.querySelectorAll('.shiny-plot-output img:not([width="100%"])').forEach(o=>{o.setAttribute("width","100%")})})}observe(e){this.resizeObserver.observe(e),this.resizeObserverEntries.push(e)}unobserve(e){let t=this.resizeObserverEntries.indexOf(e);t<0||(this.resizeObserver.unobserve(e),this.resizeObserverEntries.splice(t,1))}flush(){this.resizeObserverEntries.forEach(e=>{document.body.contains(e)||this.unobserve(e)})}};var s=class{constructor(e){if(s.instanceMap.set(e,this),this.layout={container:e,main:e.querySelector(":scope > .main"),sidebar:e.querySelector(":scope > .sidebar"),toggle:e.querySelector(":scope > .collapse-toggle")},!this.layout.toggle)throw new Error("Tried to initialize a non-collapsible sidebar.");this._initEventListeners(),this._initSidebarCounters(),this._initDesktop(),s.shinyResizeObserver.observe(this.layout.main),e.removeAttribute("data-bslib-sidebar-init");let t=e.querySelector(":scope > script[data-bslib-sidebar-init]");t&&e.removeChild(t)}get isClosed(){return this.layout.container.classList.contains(s.classes.COLLAPSE)}static getInstance(e){return s.instanceMap.get(e)}static initCollapsibleAll(e=!0){if(document.readyState==="loading"){s.onReadyScheduled||(s.onReadyScheduled=!0,document.addEventListener("DOMContentLoaded",()=>{s.initCollapsibleAll(!1)}));return}let t=`.${s.classes.LAYOUT}[data-bslib-sidebar-init]`;if(!document.querySelector(t))return;e&&s.shinyResizeObserver.flush(),document.querySelectorAll(t).forEach(n=>new s(n))}_initEventListeners(){var i;let{sidebar:e,toggle:t}=this.layout;t.addEventListener("click",n=>{n.preventDefault(),this.toggle("toggle")}),(i=t.querySelector(".collapse-icon"))==null||i.addEventListener("transitionend",()=>{this._finalizeState(),$(e).trigger("toggleCollapse.sidebarInputBinding")})}_initSidebarCounters(){let{container:e}=this.layout,t=`.${s.classes.LAYOUT}> .main > .${s.classes.LAYOUT}:not([data-bslib-sidebar-open="always"])`;if(!(e.querySelector(t)===null))return;function n(r){return r=r?r.parentElement:null,r&&r.classList.contains("main")&&(r=r.parentElement),r&&r.classList.contains(s.classes.LAYOUT)?r:null}let b=[e],o=n(e);for(;o;)b.unshift(o),o=n(o);let l={left:0,right:0};b.forEach(function(r,d){r.style.setProperty("--bslib-sidebar-counter",d.toString());let h=r.classList.contains("sidebar-right")?l.right++:l.left++;r.style.setProperty("--bslib-sidebar-overlap-counter",h.toString())})}_initDesktop(){var i;let{container:e}=this.layout;if(((i=e.dataset.bslibSidebarOpen)==null?void 0:i.trim())!=="desktop")return;window.getComputedStyle(e).getPropertyValue("--bslib-sidebar-js-init-collapsed").trim()==="true"&&this.toggle("close")}toggle(e){typeof e=="undefined"&&(e="toggle");let{container:t,sidebar:i}=this.layout,n=this.isClosed;if(["open","close","toggle"].indexOf(e)===-1)throw new Error(`Unknown method ${e}`);e==="toggle"&&(e=n?"open":"close"),!(n&&e==="close"||!n&&e==="open")&&(e==="open"&&(i.hidden=!1),t.classList.add(s.classes.TRANSITIONING),t.classList.toggle(s.classes.COLLAPSE))}_finalizeState(){let{container:e,sidebar:t,toggle:i}=this.layout;e.classList.remove(s.classes.TRANSITIONING),t.hidden=this.isClosed,i.ariaExpanded=this.isClosed?"false":"true"}},a=s;a.shinyResizeObserver=new c,a.classes={LAYOUT:"bslib-sidebar-layout",COLLAPSE:"sidebar-collapsed",TRANSITIONING:"transitioning"},a.onReadyScheduled=!1,a.instanceMap=new WeakMap;var p=class extends g{find(e){return $(e).find(`.${a.classes.LAYOUT} > .bslib-sidebar-input`)}getValue(e){let t=a.getInstance(e.parentElement);return t?t.isClosed:!1}setValue(e,t){let i=t?"open":"close";this.receiveMessage(e,{method:i})}subscribe(e,t){$(e).on("toggleCollapse.sidebarInputBinding",function(i){t(!0)})}unsubscribe(e){$(e).off(".sidebarInputBinding")}receiveMessage(e,t){let i=a.getInstance(e.parentElement);i&&i.toggle(t.method)}};y(p,"sidebar");window.bslib=window.bslib||{};window.bslib.Sidebar=a;})();
//# sourceMappingURL=sidebar.min.js.map
