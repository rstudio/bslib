/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var a=class{constructor(e){let t=r=>{for(let i of r)if(i.type==="childList"){for(let n of i.addedNodes)n.nodeType===Node.ELEMENT_NODE&&this._callback(n,this.config.added);for(let n of i.removedNodes)n.nodeType===Node.ELEMENT_NODE&&this._callback(n,this.config.removed)}};this.config=e,this.observer=new MutationObserver(t),document.readyState==="complete"?this.connect():document.addEventListener("DOMContentLoaded",()=>this.connect())}_callback(e,{selector:t,callback:r}){let i=e.matches(t),n=e.querySelector(t);!i&&!n||(i&&r(e),n&&e.querySelectorAll(t).forEach(c=>r(c)))}connect(){this._callback(document.body,this.config.added),this.observer.observe(document,{childList:!0,subtree:!0})}disconnect(){this.observer.disconnect()}};var l=window.bootstrap?window.bootstrap.Tooltip:class{},s=class{constructor(e){e.removeAttribute(s.attr.ATTR_INIT),this.container=e,s.instanceMap.set(e,this);let t=new Event("resize");this.cardResizeObserver=new ResizeObserver(()=>{window.dispatchEvent(t)}),this.cardResizeObserver.observe(this.container),this._addEventListeners(),this._enableTooltips(),this._startShinyOutputResizeObserver()}enterFullScreen(e){e&&e.preventDefault();let t=this._createOverlay();t.addEventListener("click",()=>this.exitFullScreen()),document.addEventListener("keyup",this._exitFullScreenOnEscape,!1),this.container.classList.add(s.attr.CLASS_FULL_SCREEN),document.body.classList.add(s.attr.CLASS_HAS_FULL_SCREEN),this.container.insertAdjacentElement("beforebegin",t)}exitFullScreen(){let e=document.getElementById(s.attr.ID_FULL_SCREEN_OVERLAY);e&&e.remove(),this.container.classList.remove(s.attr.CLASS_FULL_SCREEN),document.body.classList.remove(s.attr.CLASS_HAS_FULL_SCREEN),e==null||e.removeEventListener("click",()=>this.exitFullScreen()),document.removeEventListener("keyup",this._exitFullScreenOnEscape,!1)}destroy(){this._removeEventListeners(),this.cardResizeObserver.disconnect(),this.shinyOutputResizeObserver&&this.shinyOutputResizeObserver.disconnect(),s.instanceMap.delete(this.container)}_addEventListeners(){let e=this.container.querySelector(`:scope > .${s.attr.CLASS_FULL_SCREEN_ENTER}`);e&&e.addEventListener("click",t=>this.enterFullScreen(t))}_removeEventListeners(){let e=this.container.querySelector(`:scope > .${s.attr.CLASS_FULL_SCREEN_ENTER}`);e&&e.removeEventListener("click",t=>this.enterFullScreen(t))}_enableTooltips(){let e=`.${s.attr.CLASS_FULL_SCREEN_ENTER}[data-bs-toggle='tooltip']`;if(!this.container.querySelector(e))return;this.container.querySelectorAll(e).forEach(r=>new l(r))}_startShinyOutputResizeObserver(){$(document).on("shiny:value",e=>{let t=e.binding.el;this.container.contains(t)&&(t.dataset.bslibOutputObserver||(this.shinyOutputResizeObserver=new ResizeObserver(e.binding.onResize),this.shinyOutputResizeObserver.observe(t),t.dataset.bslibOutputObserver="true"))})}_exitFullScreenOnEscape(e){e.key==="Escape"&&this.exitFullScreen()}_createOverlay(){let e=document.createElement("div");e.id=s.attr.ID_FULL_SCREEN_OVERLAY,e.classList.add(s.attr.ID_FULL_SCREEN_OVERLAY);let t=document.createElement("a");return t.classList.add(s.attr.CLASS_FULL_SCREEN_EXIT),t.innerHTML=this._overlayCloseHtml(),e.appendChild(t),e}_overlayCloseHtml(){return"Close <svg width:'20' height='20' fill='currentColor' class='bi bi-x-lg' viewBox='0 0 16 16'><path d='M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z'/></svg>"}static getInstance(e){return s.instanceMap.get(e)}static get observer(){return s.documentObserver}},o=s;o.attr={ATTR_INIT:"data-bslib-card-needs-init",CLASS_CARD:"bslib-card",CLASS_FULL_SCREEN:"bslib-full-screen",CLASS_HAS_FULL_SCREEN:"bslib-has-full-screen",CLASS_FULL_SCREEN_ENTER:"bslib-full-screen-enter",CLASS_FULL_SCREEN_EXIT:"bslib-full-screen-exit",ID_FULL_SCREEN_OVERLAY:"bslib-full-screen-overlay"},o.instanceMap=new WeakMap,o.documentObserver=new a({added:{selector:`.${s.attr.CLASS_CARD}[data-bslib-card-needs-init]`,callback:e=>{new s(e)}},removed:{selector:`.${s.attr.CLASS_CARD}`,callback:e=>{var t;(t=s.getInstance(e))==null||t.destroy()}}});window.bslib=window.bslib||{};window.bslib.Card=o;})();
//# sourceMappingURL=card.min.js.map
