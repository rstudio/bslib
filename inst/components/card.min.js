/*! bslib 0.4.2.9000 | (c) 2012-2023 RStudio, PBC. | License: MIT + file LICENSE */
"use strict";(()=>{var p=window.Shiny?Shiny.InputBinding:class{};function E(c){let e=["[href]","input:not([disabled])","button:not([disabled])","select:not([disabled])","summary:not(:disabled)","details:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"]):not([disabled])'],t=c.querySelectorAll(e.join(", "));return Array.from(t)}var a=class{constructor(){this.resizeObserverEntries=[],this.resizeObserver=new ResizeObserver(e=>{let t=new Event("resize");if(window.dispatchEvent(t),!window.Shiny)return;let i=[];for(let r of e)r.target instanceof HTMLElement&&r.target.querySelector(".shiny-bound-output")&&r.target.querySelectorAll(".shiny-bound-output").forEach(s=>{if(i.includes(s))return;let{binding:d,onResize:v}=$(s).data("shinyOutputBinding");if(!d||!d.resize)return;let l=s.shinyResizeObserver;if(l&&l!==this||(l||(s.shinyResizeObserver=this),v(s),i.push(s),!s.classList.contains("shiny-plot-output")))return;let u=s.querySelector('img:not([width="100%"])');u&&u.setAttribute("width","100%")})})}observe(e){this.resizeObserver.observe(e),this.resizeObserverEntries.push(e)}unobserve(e){let t=this.resizeObserverEntries.indexOf(e);t<0||(this.resizeObserver.unobserve(e),this.resizeObserverEntries.splice(t,1))}flush(){this.resizeObserverEntries.forEach(e=>{document.body.contains(e)||this.unobserve(e)})}};var h=window.bootstrap?window.bootstrap.Tooltip:class{},n=class{constructor(e){var t;e.removeAttribute(n.attr.ATTR_INIT),(t=e.querySelector(`script[${n.attr.ATTR_INIT}]`))==null||t.remove(),this.container=e,n.instanceMap.set(e,this),n.shinyResizeObserver.observe(this.container),this._addEventListeners(),this._enableTooltips(),this.overlay=this._createOverlay()}enterFullScreen(e){e&&e.preventDefault(),this.overlay.container.addEventListener("click",()=>this.exitFullScreen()),document.addEventListener("keyup",i=>this._exitFullScreenOnEscape(i),!1);let t=E(this.container);t.length>0?(t[0].focus(),this.lastFocusInterior=t[t.length-1]):(this.lastFocusInterior=this.overlay.anchor,this.container.contains(document.activeElement)||(this.prevFocusExterior=document.activeElement,this.prevFocusExterior.addEventListener("keydown",i=>this._entrapFocus(i),{once:!0}))),this.lastFocusInterior&&(this.lastFocusInterior.onkeydown=i=>{i.key==="Tab"&&!i.shiftKey&&(i.preventDefault(),this.overlay.anchor.focus())}),this.container.classList.add(n.attr.CLASS_FULL_SCREEN),document.body.classList.add(n.attr.CLASS_HAS_FULL_SCREEN),this.container.insertAdjacentElement("beforebegin",this.overlay.container)}exitFullScreen(){this.overlay.container.removeEventListener("click",()=>this.exitFullScreen()),this.lastFocusInterior&&(this.lastFocusInterior.onkeydown=null),document.removeEventListener("keyup",e=>this._exitFullScreenOnEscape(e),!1),this.overlay.container.remove(),this.container.classList.remove(n.attr.CLASS_FULL_SCREEN),document.body.classList.remove(n.attr.CLASS_HAS_FULL_SCREEN),this.lastFocusInterior=void 0,this.prevFocusExterior=void 0}_addEventListeners(){let e=this.container.querySelector(`:scope > .${n.attr.CLASS_FULL_SCREEN_ENTER}`);e&&e.addEventListener("click",t=>this.enterFullScreen(t))}_removeEventListeners(){let e=this.container.querySelector(`:scope > .${n.attr.CLASS_FULL_SCREEN_ENTER}`);e&&e.removeEventListener("click",t=>this.enterFullScreen(t))}_enableTooltips(){let e=`.${n.attr.CLASS_FULL_SCREEN_ENTER}[data-bs-toggle='tooltip']`;if(!this.container.querySelector(e))return;this.container.querySelectorAll(e).forEach(i=>new h(i))}_exitFullScreenOnEscape(e){document.activeElement instanceof HTMLSelectElement||e.key==="Escape"&&this.exitFullScreen()}_entrapFocus(e){e instanceof KeyboardEvent&&this.container.matches(`.${n.attr.CLASS_FULL_SCREEN}`)&&e.key==="Tab"&&(e.preventDefault(),this.overlay.anchor.focus())}_createOverlay(){let e=document.createElement("div");e.id=n.attr.ID_FULL_SCREEN_OVERLAY,e.classList.add(n.attr.ID_FULL_SCREEN_OVERLAY);let t=document.createElement("a");return t.classList.add(n.attr.CLASS_FULL_SCREEN_EXIT),t.tabIndex=0,t.onclick=()=>this.exitFullScreen(),t.onkeyup=i=>{(i.key==="Enter"||i.key===" ")&&this.exitFullScreen()},t.onkeydown=i=>{var r;i.key==="Tab"&&i.shiftKey&&(i.preventDefault(),(r=this.lastFocusInterior)==null||r.focus())},t.innerHTML=this._overlayCloseHtml(),e.appendChild(t),{container:e,anchor:t}}_overlayCloseHtml(){return"Close <svg width:'20' height='20' fill='currentColor' class='bi bi-x-lg' viewBox='0 0 16 16'><path d='M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z'/></svg>"}static getInstance(e){return n.instanceMap.get(e)}static initializeAllCards(e=!0){if(document.readyState==="loading"){n.onReadyScheduled||(n.onReadyScheduled=!0,document.addEventListener("DOMContentLoaded",()=>{n.initializeAllCards(!1)}));return}e&&n.shinyResizeObserver.flush();let t=`.${n.attr.CLASS_CARD}[${n.attr.ATTR_INIT}]`;if(!document.querySelector(t))return;document.querySelectorAll(t).forEach(r=>new n(r))}},o=n;o.attr={ATTR_INIT:"data-bslib-card-init",CLASS_CARD:"bslib-card",CLASS_FULL_SCREEN:"bslib-full-screen",CLASS_HAS_FULL_SCREEN:"bslib-has-full-screen",CLASS_FULL_SCREEN_ENTER:"bslib-full-screen-enter",CLASS_FULL_SCREEN_EXIT:"bslib-full-screen-exit",ID_FULL_SCREEN_OVERLAY:"bslib-full-screen-overlay"},o.shinyResizeObserver=new a,o.instanceMap=new WeakMap,o.onReadyScheduled=!1;window.bslib=window.bslib||{};window.bslib.Card=o;})();
//# sourceMappingURL=card.min.js.map
