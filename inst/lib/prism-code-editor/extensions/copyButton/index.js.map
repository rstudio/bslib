{"version":3,"file":"index.js","sources":["../../../src/extensions/copyButton/index.ts"],"sourcesContent":["/** @module copy-button */\r\n\r\nimport { createTemplate } from \"../../core.js\"\r\nimport { BasicExtension } from \"../../types.js\"\r\n\r\nconst template = createTemplate(\r\n\t'<div style=display:flex;align-items:flex-start;justify-content:flex-end><button type=button dir=ltr style=display:none class=pce-copy aria-label=Copy><svg width=1.2em viewbox=\"0 0 48 48\" overflow=visible stroke-width=4 stroke-linecap=round fill=none stroke=currentColor><rect x=16 y=16 width=30 height=30 rx=3 /><path d=\"M32 9V5a3 3 0 0 0-3-3H5a3 3 0 0 0-3 3v24a3 3 0 0 0 3 3h4\"/>',\r\n)\r\nconst clipboard = navigator.clipboard\r\n\r\n/**\r\n * Extension that adds a copy button to the editor.\r\n * Probably best used with a read-only editor.\r\n * You must also import styles from `prism-code-editor/copy-button.css`.\r\n */\r\nexport const copyButton = (): BasicExtension => editor => {\r\n\tconst container = template(),\r\n\t\tbtn = <HTMLButtonElement>container.firstChild!\r\n\r\n\tbtn.addEventListener(\"click\", () => {\r\n\t\tbtn.setAttribute(\"aria-label\", \"Copied!\")\r\n\t\tif (clipboard) clipboard.writeText(editor.extensions.codeFold?.fullCode ?? editor.value)\r\n\t\telse {\r\n\t\t\teditor.textarea.select()\r\n\t\t\tdocument.execCommand(\"copy\")\r\n\t\t\teditor.setSelection(0)\r\n\t\t}\r\n\t})\r\n\r\n\tbtn.addEventListener(\"pointerenter\", () => btn.setAttribute(\"aria-label\", \"Copy\"))\r\n\r\n\teditor.overlays.append(container)\r\n}\r\n"],"names":[],"mappings":";AAKA,MAAM,WAAW;AAAA,EAChB;AACD;AACA,MAAM,YAAY,UAAU;AAOf,MAAA,aAAa,MAAsB,CAAU,WAAA;AACzD,QAAM,YAAY,SAAA,GACjB,MAAyB,UAAU;AAEhC,MAAA,iBAAiB,SAAS,MAAM;AAC/B,QAAA,aAAa,cAAc,SAAS;AACpC,QAAA,qBAAqB,UAAU,OAAO,WAAW,UAAU,YAAY,OAAO,KAAK;AAAA,SAClF;AACJ,aAAO,SAAS,OAAO;AACvB,eAAS,YAAY,MAAM;AAC3B,aAAO,aAAa,CAAC;AAAA,IAAA;AAAA,EACtB,CACA;AAED,MAAI,iBAAiB,gBAAgB,MAAM,IAAI,aAAa,cAAc,MAAM,CAAC;AAE1E,SAAA,SAAS,OAAO,SAAS;AACjC;"}